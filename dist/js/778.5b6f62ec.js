"use strict";(self["webpackChunkbottlebox"]=self["webpackChunkbottlebox"]||[]).push([[778],{7778:function(e,t,o){o.r(t),o.d(t,{default:function(){return T}});var l=o(3396),n=o(7139);const a={style:{border:"1px solid #ccc",height:"calc( 100vh - 32px)",display:"flex","flex-direction":"column","align-items":"center","background-color":"whitesmoke"}},d={style:{width:"250px",position:"absolute",left:"0",top:"75px"}},i={id:"header-container"},r=["id","type"];function u(e,t,o,u,s,c){const m=(0,l.up)("HomeFilled"),p=(0,l.up)("el-icon"),g=(0,l.up)("el-button"),f=(0,l.up)("Upload"),h=(0,l.up)("el-input"),v=(0,l.up)("Toolbar"),b=(0,l.up)("Editor");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("span",null,[(0,l.Wm)(h,{modelValue:u.blogForm.title,"onUpdate:modelValue":t[0]||(t[0]=e=>u.blogForm.title=e),placeholder:"请键入标题",clearable:"","input-style":"text-align: center;"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(g,{onClick:u.goHome},{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m)])),_:1})])),_:1},8,["onClick"])])),append:(0,l.w5)((()=>[(0,l.Wm)(g,{onClick:u.submit},{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f)])),_:1})])),_:1},8,["onClick"])])),_:1},8,["modelValue"])]),(0,l._)("div",a,[(0,l.Wm)(v,{style:{"border-bottom":"1px solid #ccc",width:"100vw"},editor:u.editorRef,defaultConfig:u.toolbarConfig,mode:u.mode},null,8,["editor","defaultConfig","mode"]),(0,l.Wm)(b,{style:{height:"100vh","overflow-y":"hidden",width:"65vw"},modelValue:u.blogForm.content,"onUpdate:modelValue":t[1]||(t[1]=e=>u.blogForm.content=e),defaultConfig:u.editorConfig,mode:u.mode,onOnCreated:u.handleCreated,onOnChange:u.handleChange},null,8,["modelValue","defaultConfig","mode","onOnCreated","onOnChange"]),(0,l._)("div",d,[(0,l._)("ul",i,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(u.lis,(e=>((0,l.wg)(),(0,l.iD)("li",{id:e.id,type:e.type},(0,n.zw)(e.text),9,r)))),256))])])])],64)}var s=o(4870),c=o(3745),m=o(6854);const p=(0,l.aZ)({name:"Upload"}),g={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},f=(0,l._)("path",{fill:"currentColor",d:"M160 832h704a32 32 0 1 1 0 64H160a32 32 0 1 1 0-64zm384-578.304V704h-64V247.296L237.248 490.048 192 444.8 508.8 128l316.8 316.8-45.312 45.248L544 253.696z"},null,-1),h=[f];function v(e,t,o,n,a,d){return(0,l.wg)(),(0,l.iD)("svg",g,h)}var b=(0,m.Z)(p,[["render",v]]),w=o(2088),y=o(678),C=o(6265),x=o.n(C),_=o(5574),H=o(1221),k={components:{Editor:c.M,Toolbar:c.o,Upload:b,HomeFilled:w.Z},setup(){const e=(0,y.tv)(),t=(0,y.yj)();let o=t.query.id;const n=new Date,a=(0,s.XI)();let d=(0,s.iH)("");const i=(0,s.iH)({id:t.query.id,title:"",content:"",fromTime:n.toLocaleDateString(),toTime:n.toLocaleDateString(),userId:JSON.parse(sessionStorage.getItem("user")||"{}").id});(0,l.bv)((()=>{setTimeout((()=>{"0"!=o&&r(o)}),0)}));const r=e=>{x().get("/api/blog/select.do",{params:{id:e}}).then((e=>{i.value.title=e.data.data.title,i.value.content=e.data.data.content}))},u=()=>{"0"==i.value.id?x().post("/api/blog/insert.do",i.value).then((e=>{"0"==e.data.code?(_.z8.success("保存成功！"),i.value.id=e.data.data):_.z8.error("保存失败！")})):x().post("/api/blog/update.do",i.value).then((e=>{"0"==e.data.code?_.z8.success("更新成功！"):_.z8.error("更新失败！")}))},c=()=>{e.push("/blog")},m={},p={placeholder:"请输入内容..."};(0,l.Jd)((()=>{const e=a.value;null!=e&&e.destroy()}));const g=e=>{a.value=e;const t=a.value.getElemsByTypePrefix("header"),o=document.getElementById("header-container");o.addEventListener("mousedown",(t=>{if("LI"!==t.target.tagName)return;t.preventDefault();const o=t.target.id;e.scrollToElem(o)})),t.map((e=>{const t=H.QA.string(e),{id:o,type:l}=e;f.value.push({id:o,type:l,text:t})}))},f=(0,s.iH)([]),h=e=>{f.value=[];const t=a.value.getElemsByTypePrefix("header"),o=document.getElementById("header-container");o.addEventListener("mousedown",(t=>{if("LI"!==t.target.tagName)return;t.preventDefault();const o=t.target.id;e.scrollToElem(o)})),t.map((e=>{const t=H.QA.string(e),{id:o,type:l}=e;f.value.push({id:o,type:l,text:t})}))};return{blogForm:i,submit:u,editorRef:a,valueHtml:d,mode:"default",toolbarConfig:m,editorConfig:p,handleCreated:g,goHome:c,lis:f,handleChange:h}}},E=o(89);const D=(0,E.Z)(k,[["render",u],["__scopeId","data-v-befd638a"]]);var T=D}}]);
//# sourceMappingURL=778.5b6f62ec.js.map