"use strict";(self["webpackChunkbottlebox"]=self["webpackChunkbottlebox"]||[]).push([[359],{9359:function(e,o,t){t.r(o),t.d(o,{default:function(){return y}});var l=t(3396);const n={style:{border:"1px solid #ccc",height:"calc( 100vh - 32px)",display:"flex","flex-direction":"column","align-items":"center","background-color":"whitesmoke"}};function a(e,o,t,a,d,i){const r=(0,l.up)("HomeFilled"),u=(0,l.up)("el-icon"),c=(0,l.up)("el-button"),s=(0,l.up)("Upload"),m=(0,l.up)("el-input"),p=(0,l.up)("Toolbar"),g=(0,l.up)("Editor");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("span",null,[(0,l.Wm)(m,{modelValue:a.blogForm.title,"onUpdate:modelValue":o[0]||(o[0]=e=>a.blogForm.title=e),placeholder:"请键入标题",clearable:"","input-style":"text-align: center;"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(c,{onClick:a.goHome},{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r)])),_:1})])),_:1},8,["onClick"])])),append:(0,l.w5)((()=>[(0,l.Wm)(c,{onClick:a.submit},{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)(s)])),_:1})])),_:1},8,["onClick"])])),_:1},8,["modelValue"])]),(0,l._)("div",n,[(0,l.Wm)(p,{style:{"border-bottom":"1px solid #ccc",width:"100vw"},editor:a.editorRef,defaultConfig:a.toolbarConfig,mode:a.mode},null,8,["editor","defaultConfig","mode"]),(0,l.Wm)(g,{style:{height:"100vh","overflow-y":"hidden",width:"65vw"},modelValue:a.blogForm.content,"onUpdate:modelValue":o[1]||(o[1]=e=>a.blogForm.content=e),defaultConfig:a.editorConfig,mode:a.mode,onOnCreated:a.handleCreated},null,8,["modelValue","defaultConfig","mode","onOnCreated"])])],64)}var d=t(4870),i=t(6126),r=t(6854);const u=(0,l.aZ)({name:"Upload"}),c={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},s=(0,l._)("path",{fill:"currentColor",d:"M160 832h704a32 32 0 1 1 0 64H160a32 32 0 1 1 0-64zm384-578.304V704h-64V247.296L237.248 490.048 192 444.8 508.8 128l316.8 316.8-45.312 45.248L544 253.696z"},null,-1),m=[s];function p(e,o,t,n,a,d){return(0,l.wg)(),(0,l.iD)("svg",c,m)}var g=(0,r.Z)(u,[["render",p]]),f=t(2088),b=t(678),h=t(6265),v=t.n(h),w=t(5574),C={components:{Editor:i.M,Toolbar:i.o,Upload:g,HomeFilled:f.Z},setup(){const e=(0,b.tv)(),o=(0,b.yj)();let t=o.query.id;const n=new Date,a=(0,d.XI)();let i=(0,d.iH)("");const r=(0,d.iH)({id:o.query.id,title:"",content:"",fromTime:n.toLocaleDateString(),toTime:n.toLocaleDateString(),userId:JSON.parse(sessionStorage.getItem("user")||"{}").id});(0,l.bv)((()=>{setTimeout((()=>{"0"!=t&&u(t)}),0)}));const u=e=>{v().get("/api/blog/select.do",{params:{id:e}}).then((e=>{r.value.title=e.data.data.title,r.value.content=e.data.data.content}))},c=()=>{"0"==r.value.id?v().post("/api/blog/insert.do",r.value).then((e=>{"0"==e.data.code?(w.z8.success("保存成功！"),r.value.id=e.data.data):w.z8.error("保存失败！")})):v().post("/api/blog/update.do",r.value).then((e=>{"0"==e.data.code?w.z8.success("更新成功！"):w.z8.error("更新失败！")}))},s=()=>{e.push("/blog")},m={},p={placeholder:"请输入内容..."};(0,l.Jd)((()=>{const e=a.value;null!=e&&e.destroy()}));const g=e=>{a.value=e};return{blogForm:r,submit:c,editorRef:a,valueHtml:i,mode:"default",toolbarConfig:m,editorConfig:p,handleCreated:g,goHome:s}}},k=t(89);const x=(0,k.Z)(C,[["render",a]]);var y=x}}]);
//# sourceMappingURL=359.29fa8bbc.js.map