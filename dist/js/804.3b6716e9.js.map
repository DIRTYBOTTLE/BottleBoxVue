{"version":3,"file":"js/804.3b6716e9.js","mappings":"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","sources":["webpack://bottlebox/./src/views/BlogContent.vue","webpack://bottlebox/./src/views/BlogContent.vue?3e72","webpack://bottlebox/./node_modules/@element-plus/icons-vue/dist/es/edit.mjs"],"sourcesContent":["<template>\n  <div style=\"display: flex;flex-direction: column;align-items: center;background-color: whitesmoke\">\n    <h1 align=\"center\">{{ title }}</h1>\n    <el-button @click=\"goHome\" style=\"position: absolute;top: 0;left: 0\">\n      <el-icon>\n        <HomeFilled/>\n      </el-icon>\n    </el-button>\n    <el-button @click=\"goEdit\" style=\"position: absolute;top: 0;right: 0\">\n      <el-icon>\n        <Edit/>\n      </el-icon>\n    </el-button>\n    <Editor\n        style=\"height: calc(100vh - 46px); overflow-y: hidden; width: 65vw;\"\n        v-model=\"content\"\n        :defaultConfig=\"editorConfig\"\n        :mode=\"mode\"\n        @onCreated=\"handleCreated\"\n        @onChange=\"handleChange\"\n    />\n    <div style=\"width: 250px;position: absolute;left: 0;top: 40px\">\n      <ul id=\"header-container\">\n        <li v-for=\"item in lis\" :id=\"item.id\" :type=\"item.type\">{{ item.text }}</li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {useRoute, useRouter} from 'vue-router'\nimport axios from \"axios\";\nimport '@wangeditor/editor/dist/css/style.css' // 引入 css\nimport {onBeforeUnmount, ref, shallowRef, onMounted} from 'vue'\nimport {Editor, Toolbar} from '@wangeditor/editor-for-vue'\nimport {HomeFilled, Edit} from \"@element-plus/icons-vue\";\nimport {SlateNode} from '@wangeditor/editor'\n\n\nexport default {\n  name: \"BlogContent\",\n  components: {Editor, Toolbar, HomeFilled, Edit},\n  setup() {\n    const route = useRoute()\n    const id = route.query.id;\n    const title = ref(\"\");\n    const content = ref(\"\");\n    axios.get('/api/blog/select.do', {params: {id: id}})\n        .then(res => {\n          content.value = res.data.data.content\n          title.value = res.data.data.title\n        })\n\n    // 编辑器实例，必须用 shallowRef\n    const editorRef = shallowRef()\n\n    // 内容 HTML\n    const valueHtml = ref('')\n\n    const editorConfig = {}\n\n    // 组件销毁时，也及时销毁编辑器\n    onBeforeUnmount(() => {\n      const editor = editorRef.value\n      if (editor == null) return\n      editor.destroy()\n    })\n\n    const handleCreated = (editor) => {\n      editor.disable()\n      editorRef.value = editor // 记录 editor 实例，重要！\n\n    }\n\n    const lis = ref([])\n    const handleChange = (editor) => {\n      lis.value = []\n      const headers = editorRef.value.getElemsByTypePrefix('header')\n      const headerContainer = document.getElementById('header-container')\n      headerContainer.addEventListener('mousedown', event => {\n        if (event.target.tagName !== 'LI') return\n        event.preventDefault()\n        const id = event.target.id\n        editor.scrollToElem(id) // 滚动到标题\n      })\n      headers.map(header => {\n        const text = SlateNode.string(header)\n        const {id, type} = header\n        lis.value.push({id, type, text})\n      })\n    }\n\n    const router = useRouter();\n    const goHome = () => {\n      router.push('/blog')\n    }\n\n    const goEdit = () => {\n      router.push('/blogedit?id=' + id)\n    }\n\n    return {\n      title,\n      content,\n      editorRef,\n      valueHtml,\n      mode: 'default', // 或 'simple'\n      editorConfig,\n      handleCreated,\n      goHome,\n      goEdit,\n      handleChange,\n      lis\n    }\n  }\n}\n</script>\n\n<style scoped>\n#header-container {\n  list-style-type: none;\n  padding-left: 20px;\n  height: calc(100vh - 46px);\n  overflow-y: hidden;\n}\n\n#header-container:hover {\n  overflow-y: auto;\n}\n\n#header-container li {\n  margin: 10px 0;\n  cursor: pointer;\n}\n\n#header-container li:hover {\n  text-decoration: underline;\n}\n\n#header-container li[type=\"header1\"] {\n  font-size: 16px;\n  font-weight: bold;\n  color: IndianRed;\n}\n\n#header-container li[type=\"header2\"] {\n  font-size: 14px;\n  padding-left: 15px;\n  font-weight: bold;\n}\n\n#header-container li[type=\"header3\"] {\n  font-size: 12px;\n  padding-left: 30px;\n}\n\n\n</style>","import { render } from \"./BlogContent.vue?vue&type=template&id=73afce62&scoped=true\"\nimport script from \"./BlogContent.vue?vue&type=script&lang=js\"\nexport * from \"./BlogContent.vue?vue&type=script&lang=js\"\n\nimport \"./BlogContent.vue?vue&type=style&index=0&id=73afce62&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/bottle/Documents/Code/BottleBoxVue/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-73afce62\"]])\n\nexport default __exports__","import { defineComponent, openBlock, createElementBlock, createElementVNode } from 'vue';\nimport _export_sfc from './_virtual/plugin-vue_export-helper.mjs';\n\nconst _sfc_main = defineComponent({\n  name: \"Edit\"\n});\nconst _hoisted_1 = {\n  viewBox: \"0 0 1024 1024\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n};\nconst _hoisted_2 = /* @__PURE__ */ createElementVNode(\"path\", {\n  fill: \"currentColor\",\n  d: \"M832 512a32 32 0 1 1 64 0v352a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h352a32 32 0 0 1 0 64H192v640h640V512z\"\n}, null, -1);\nconst _hoisted_3 = /* @__PURE__ */ createElementVNode(\"path\", {\n  fill: \"currentColor\",\n  d: \"m469.952 554.24 52.8-7.552L847.104 222.4a32 32 0 1 0-45.248-45.248L477.44 501.44l-7.552 52.8zm422.4-422.4a96 96 0 0 1 0 135.808l-331.84 331.84a32 32 0 0 1-18.112 9.088L436.8 623.68a32 32 0 0 1-36.224-36.224l15.104-105.6a32 32 0 0 1 9.024-18.112l331.904-331.84a96 96 0 0 1 135.744 0z\"\n}, null, -1);\nconst _hoisted_4 = [\n  _hoisted_2,\n  _hoisted_3\n];\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"svg\", _hoisted_1, _hoisted_4);\n}\nvar edit = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\n\nexport { edit as default };\n"],"names":["style","align","id","_createElementBlock","_createElementVNode","_toDisplayString","$setup","_createVNode","_component_el_button","onClick","_component_el_icon","_component_HomeFilled","_component_Edit","_component_Editor","$event","defaultConfig","mode","onOnCreated","onOnChange","_Fragment","_renderList","item","type","text","_hoisted_5","name","components","Editor","Toolbar","HomeFilled","Edit","setup","route","useRoute","query","title","ref","content","axios","params","then","res","value","data","editorRef","shallowRef","valueHtml","editorConfig","onBeforeUnmount","editor","destroy","handleCreated","disable","lis","handleChange","headers","getElemsByTypePrefix","headerContainer","document","getElementById","addEventListener","event","target","tagName","preventDefault","scrollToElem","map","header","SlateNode","push","router","useRouter","goHome","goEdit","__exports__","render","_sfc_main","defineComponent","_hoisted_1","viewBox","xmlns","_hoisted_2","createElementVNode","fill","d","_hoisted_3","_hoisted_4","_sfc_render","_ctx","_cache","$props","$data","$options","openBlock","createElementBlock","edit","_export_sfc"],"sourceRoot":""}