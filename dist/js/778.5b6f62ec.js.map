{"version":3,"file":"js/778.5b6f62ec.js","mappings":"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","sources":["webpack://bottlebox/./src/views/BlogEdit.vue","webpack://bottlebox/./node_modules/@element-plus/icons-vue/dist/es/upload.mjs","webpack://bottlebox/./src/views/BlogEdit.vue?04e5"],"sourcesContent":["<template>\n  <span>\n    <el-input v-model=\"blogForm.title\" placeholder=\"请键入标题\" clearable input-style=\"text-align: center;\">\n      <template #prepend>\n        <el-button @click=\"goHome\">\n          <el-icon>\n            <HomeFilled/>\n          </el-icon>\n        </el-button>\n      </template>\n      <template #append>\n        <el-button @click=\"submit\">\n          <el-icon>\n            <Upload/>\n          </el-icon>\n        </el-button>\n      </template>\n    </el-input>\n  </span>\n  <div style=\"border: 1px solid #ccc;height: calc( 100vh - 32px);\n  display: flex;flex-direction: column;align-items: center;background-color: whitesmoke\">\n    <Toolbar\n        style=\"border-bottom: 1px solid #ccc;width: 100vw\"\n        :editor=\"editorRef\"\n        :defaultConfig=\"toolbarConfig\"\n        :mode=\"mode\"\n    />\n    <Editor\n        style=\"height: 100vh; overflow-y: hidden; width: 65vw;\"\n        v-model=\"blogForm.content\"\n        :defaultConfig=\"editorConfig\"\n        :mode=\"mode\"\n        @onCreated=\"handleCreated\"\n        @onChange=\"handleChange\"\n    />\n    <div style=\"width: 250px;position: absolute;left: 0;top: 75px;\">\n      <ul id=\"header-container\">\n        <li v-for=\"item in lis\" :id=\"item.id\" :type=\"item.type\">{{ item.text }}</li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nimport '@wangeditor/editor/dist/css/style.css' // 引入 css\nimport {onBeforeUnmount, onMounted, ref, shallowRef} from 'vue'\nimport {Editor, Toolbar} from '@wangeditor/editor-for-vue'\nimport {HomeFilled, Upload} from \"@element-plus/icons-vue\";\nimport {useRoute, useRouter} from 'vue-router';\nimport axios from \"axios\";\nimport {ElMessage} from \"element-plus\";\nimport {SlateNode} from \"@wangeditor/editor\";\n\n\nexport default {\n  components: {Editor, Toolbar, Upload, HomeFilled},\n  setup() {\n\n    const router = useRouter();\n    const route = useRoute()\n    let id = route.query.id\n\n    const myDate = new Date();\n\n    // 编辑器实例，必须用 shallowRef\n    const editorRef = shallowRef()\n\n    // 内容 HTML\n    let valueHtml = ref('')\n\n    const blogForm = ref({\n      id: route.query.id,\n      title: '',\n      content: '',\n      fromTime: myDate.toLocaleDateString(),\n      toTime: myDate.toLocaleDateString(),\n      userId: JSON.parse(sessionStorage.getItem(\"user\") || \"{}\").id\n    })\n\n    // 模拟 ajax 异步获取内容\n    onMounted(() => {\n      setTimeout(() => {\n        if (id != '0') {\n          getBlog(id)\n        }\n      }, 0)\n    })\n\n    const getBlog = (id) => {\n      axios.get('/api/blog/select.do', {\n        params: {\n          id: id\n        }\n      }).then(res => {\n        blogForm.value.title = res.data.data.title\n        blogForm.value.content = res.data.data.content\n      })\n    }\n\n    const submit = () => {\n      if (blogForm.value.id == '0') {\n        axios.post('/api/blog/insert.do', blogForm.value).then(res => {\n          if (res.data.code == '0') {\n            ElMessage.success(\"保存成功！\")\n            blogForm.value.id = res.data.data\n          } else {\n            ElMessage.error(\"保存失败！\")\n          }\n        })\n      } else {\n        axios.post('/api/blog/update.do', blogForm.value).then(res => {\n          if (res.data.code == '0') {\n            ElMessage.success(\"更新成功！\")\n          } else {\n            ElMessage.error(\"更新失败！\")\n          }\n        })\n      }\n    }\n\n    const goHome = () => {\n      router.push('/blog')\n    }\n\n    const toolbarConfig = {}\n    const editorConfig = {placeholder: '请输入内容...'}\n\n    // 组件销毁时，也及时销毁编辑器\n    onBeforeUnmount(() => {\n      const editor = editorRef.value\n      if (editor == null) return\n      editor.destroy()\n    })\n\n    const handleCreated = (editor) => {\n      editorRef.value = editor // 记录 editor 实例，重要！\n      const headers = editorRef.value.getElemsByTypePrefix('header')\n      const headerContainer = document.getElementById('header-container')\n      headerContainer.addEventListener('mousedown', event => {\n        if (event.target.tagName !== 'LI') return\n        event.preventDefault()\n        const id = event.target.id\n        editor.scrollToElem(id) // 滚动到标题\n      })\n      headers.map(header => {\n        const text = SlateNode.string(header)\n        const {id, type} = header\n        lis.value.push({id,type,text})\n      })\n    }\n\n    const lis = ref([])\n    const handleChange = (editor) => {\n      lis.value = []\n      const headers = editorRef.value.getElemsByTypePrefix('header')\n      const headerContainer = document.getElementById('header-container')\n      headerContainer.addEventListener('mousedown', event => {\n        if (event.target.tagName !== 'LI') return\n        event.preventDefault()\n        const id = event.target.id\n        editor.scrollToElem(id) // 滚动到标题\n      })\n      headers.map(header => {\n        const text = SlateNode.string(header)\n        const {id, type} = header\n        lis.value.push({id,type,text})\n      })\n    }\n\n\n    return {\n      // title,\n      blogForm,\n      submit,\n      editorRef,\n      valueHtml,\n      mode: 'default', // 或 'simple'\n      toolbarConfig,\n      editorConfig,\n      handleCreated,\n      goHome,\n      lis,\n      handleChange\n    };\n  }\n}\n</script>\n\n<style scoped>\n#header-container {\n  list-style-type: none;\n  padding-left: 20px;\n  height: calc(100vh - 80px);\n  overflow-y: hidden;\n}\n\n#header-container:hover{\n  overflow-y: auto;\n}\n\n#header-container li {\n  margin: 10px 0;\n  cursor: pointer;\n}\n\n#header-container li:hover {\n  text-decoration: underline;\n}\n\n#header-container li[type=\"header1\"] {\n  font-size: 16px;\n  font-weight: bold;\n  color: IndianRed;\n}\n\n#header-container li[type=\"header2\"] {\n  font-size: 14px;\n  padding-left: 15px;\n  font-weight: bold;\n}\n\n#header-container li[type=\"header3\"] {\n  font-size: 12px;\n  padding-left: 30px;\n}\n</style>","import { defineComponent, openBlock, createElementBlock, createElementVNode } from 'vue';\nimport _export_sfc from './_virtual/plugin-vue_export-helper.mjs';\n\nconst _sfc_main = defineComponent({\n  name: \"Upload\"\n});\nconst _hoisted_1 = {\n  viewBox: \"0 0 1024 1024\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n};\nconst _hoisted_2 = /* @__PURE__ */ createElementVNode(\"path\", {\n  fill: \"currentColor\",\n  d: \"M160 832h704a32 32 0 1 1 0 64H160a32 32 0 1 1 0-64zm384-578.304V704h-64V247.296L237.248 490.048 192 444.8 508.8 128l316.8 316.8-45.312 45.248L544 253.696z\"\n}, null, -1);\nconst _hoisted_3 = [\n  _hoisted_2\n];\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"svg\", _hoisted_1, _hoisted_3);\n}\nvar upload = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\n\nexport { upload as default };\n","import { render } from \"./BlogEdit.vue?vue&type=template&id=befd638a&scoped=true\"\nimport script from \"./BlogEdit.vue?vue&type=script&lang=js\"\nexport * from \"./BlogEdit.vue?vue&type=script&lang=js\"\n\nimport \"./BlogEdit.vue?vue&type=style&index=0&id=befd638a&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/bottle/Documents/Code/BottleBoxVue/vue/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-befd638a\"]])\n\nexport default __exports__"],"names":["style","id","_createElementVNode","_createVNode","_component_el_input","$setup","title","$event","placeholder","clearable","prepend","_component_el_button","onClick","_component_el_icon","_component_HomeFilled","append","_component_Upload","_component_Toolbar","editor","defaultConfig","mode","_component_Editor","content","onOnCreated","onOnChange","_createElementBlock","_Fragment","_renderList","item","type","text","_hoisted_4","_sfc_main","defineComponent","name","_hoisted_1","viewBox","xmlns","_hoisted_2","createElementVNode","fill","d","_hoisted_3","_sfc_render","_ctx","_cache","$props","$data","$options","openBlock","createElementBlock","upload","_export_sfc","components","Editor","Toolbar","Upload","HomeFilled","setup","router","useRouter","route","useRoute","query","myDate","Date","editorRef","shallowRef","valueHtml","ref","blogForm","fromTime","toLocaleDateString","toTime","userId","JSON","parse","sessionStorage","getItem","onMounted","setTimeout","getBlog","axios","params","then","res","value","data","submit","code","ElMessage","goHome","push","toolbarConfig","editorConfig","onBeforeUnmount","destroy","handleCreated","headers","getElemsByTypePrefix","headerContainer","document","getElementById","addEventListener","event","target","tagName","preventDefault","scrollToElem","map","header","SlateNode","lis","handleChange","__exports__","render"],"sourceRoot":""}